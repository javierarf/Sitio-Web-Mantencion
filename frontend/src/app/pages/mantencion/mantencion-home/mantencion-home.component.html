<app-navbar></app-navbar>

<div class="container">
  <div class="card">
    <h2>Área de mantención: Tareas asignadas</h2>

    <div *ngIf="tareas.length === 0" class="info-text">
      No hay tareas cargadas o se están cargando...
    </div>

    <div class="tarea-list">
      <div *ngFor="let s of tareas" class="tarea-card">
        <div class="tarea-content">
          <div class="tarea-main">
            <strong>{{ s.resumen }}</strong>
            <p>{{ s.descripcion }}</p>
            <div class="small-text">
              Prioridad:
              <span class="badge" [ngClass]="{
                'badge-alta': s.prioridad === 'alta',
                'badge-media': s.prioridad === 'media',
                'badge-baja': s.prioridad === 'baja'
              }">
                {{ s.prioridad }}
              </span>
            </div>
          </div>
          
          <div class="tarea-imagen" *ngIf="s.imagen_url">
            <img 
              [src]="s.imagen_url" 
              alt="Imagen tarea" 
              (click)="abrirImagen(s.imagen_url)"
              class="imagen-thumbnail"
            >
          </div>
        </div>
        
        <div class="tarea-actions">
          <label class="checkbox-label">
            <input type="checkbox" [checked]="s.completada" (change)="toggle(s)" />
            Completada
          </label>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal para imagen ampliada -->
<div *ngIf="imagenAmpliada" class="modal" (click)="cerrarImagen()">
  <div class="modal-content">
    <img [src]="imagenAmpliada" alt="Imagen ampliada">
  </div>
</div>